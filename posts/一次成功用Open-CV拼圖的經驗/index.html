<html><head><title>一次成功用 Open CV 拼圖的經驗&nbsp;-&nbsp;auphone.net</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-92978795-2"></script><script data-ad-client="ca-pub-1447883820552850" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-92978795-2")</script><link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><meta charset="UTF8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto+Sans+TC:400,700&display=swap.css"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 4.2.1"></head><body id="site"><div class="sidebar-wrap"><div class="sidebar"><div class="info"><a class="greetings" href="/"><h1>嗨,</h1><h2>我是Auphone</h2></a><div class="bio">揼Code尋生活<br>寫App為生存<br>學而時習之，不亦說乎？</div><div class="highlight">Happy Coding &lt;3</div><div class="social"><a href="https://github.com/auphone" target="_new"><i class="icon-github-circled"></i></a><a href="https://twitter.com/auphonehk" target="_new"><i class="icon-twitter-bird"></i></a></div></div><footer><div class="container"><a class="copy-right-text" href="/">ヾ(*ΦωΦ)ツ<br>© 2022 auphone.net</a><div id="sub"><form id="sub-form" action="https://auphone.us18.list-manage.com/subscribe/post?u=1b175b7b8039f63120af59b14&amp;id=f727c66d2f" method="post" target="_blank"><input id="sub-email" type="email" name="EMAIL" placeholder="電郵地址" required><button id="sub-btn" type="submit">訂閱</button></form></div></div></footer></div></div><div class="wrap"><div class="content"><link rel="stylesheet" href="/css/post.css"><div id="post"><article><p class="date">18年11月01日</p><h1 class="title">一次成功用 Open CV 拼圖的經驗</h1><p></p><blockquote><p>懶惰，造就科研人才，所以我從小就注定投身這行業！上年我在日本因酒醉而買了一幅平常連碰都不會碰的拼圖，結果？看標題就知道了吧。</p></blockquote><img src="/posts/%E4%B8%80%E6%AC%A1%E6%88%90%E5%8A%9F%E7%94%A8Open-CV%E6%8B%BC%E5%9C%96%E7%9A%84%E7%B6%93%E9%A9%97/one_piece_slim.jpeg" title="One Piece Jigsaw"><p class="caption">路飛…你害我近視加深了</p><h2 id="一星期的堅持…"><a href="#一星期的堅持…" class="headerlink" title="一星期的堅持…"></a>一星期的堅持…</h2><p>最初的一星期，我也<strong>堅持每天砌一點</strong>，可是七天很快便過去了，我看到的只有<strong>一幅拚圖的邊緣</strong>，根本連十分一也沒有！</p><img src="/posts/%E4%B8%80%E6%AC%A1%E6%88%90%E5%8A%9F%E7%94%A8Open-CV%E6%8B%BC%E5%9C%96%E7%9A%84%E7%B6%93%E9%A9%97/slam_dunk.jpg" title="Lack of focus"><p class="caption">你收聲！</p><h2 id="然後…"><a href="#然後…" class="headerlink" title="然後…"></a>然後…</h2><p>然後我就把拼圖封印在床下底了…咦？不應該是這樣的，難道這不是一個<strong>天才工程師</strong>用<strong>神跡般的技術完成拼圖</strong>的故事嗎？</p><blockquote><p>… 不是。</p></blockquote><h2 id="半年後…用程式挑戰！"><a href="#半年後…用程式挑戰！" class="headerlink" title="半年後…用程式挑戰！"></a>半年後…用程式挑戰！</h2><p>不過我又怎能讓它一直放在床下呢，於是我就打算<strong>用自己的專長</strong>把這又麻煩、又礙事的東西解決掉。這就是我當時的程式，我把原圖<strong>拆分成九格進行運算</strong>，這樣做除了計算速度比較快，也比較準確！</p><img src="/posts/%E4%B8%80%E6%AC%A1%E6%88%90%E5%8A%9F%E7%94%A8Open-CV%E6%8B%BC%E5%9C%96%E7%9A%84%E7%B6%93%E9%A9%97/open_cv_program.jpeg" title="Open CV Jigsaw Program"><p class="caption">惡夢…</p><h2 id="學習了兩種不熟悉的程式語言"><a href="#學習了兩種不熟悉的程式語言" class="headerlink" title="學習了兩種不熟悉的程式語言"></a>學習了兩種不熟悉的程式語言</h2><p>這就是我<strong>喜歡做 Side Project</strong> 的原因，因為我經常要學習一些陌生的技術，每次都讓我感到<strong>很新鮮有趣</strong>。這次我總共寫了兩個程式</p><p>一個是 <strong>iOS App</strong>，主要是 real-time <strong>拍下拼圖片</strong>然後傳送到伺服器，這花了我不少時間，還迫我裝了個黑蘋果…</p><p>另一個是 Python 伺服器再加上 <strong>OpenCV</strong> 3.0，CV 就是電腦視覺 Computer Vision 的縮寫，<strong>用於圖像比對</strong>，雖然 OpenCV 很有趣，但我不太喜歡 Python</p><img src="/posts/%E4%B8%80%E6%AC%A1%E6%88%90%E5%8A%9F%E7%94%A8Open-CV%E6%8B%BC%E5%9C%96%E7%9A%84%E7%B6%93%E9%A9%97/python_opencv.png" title="OpenCV and Python"><h2 id="難題-1、沒有原圖"><a href="#難題-1、沒有原圖" class="headerlink" title="難題 1、沒有原圖"></a>難題 1、沒有原圖</h2><p>我只能<strong>靠印在拼圖盒上的圖片作比較</strong>，大小最多就只 800pixel，加上小弟沒有攝影的習慣，所以全程都只是在用我的手機 iPhone 6S 進行拍攝，難免有準確性問題…</p><h2 id="難題-2、不規則的形狀"><a href="#難題-2、不規則的形狀" class="headerlink" title="難題 2、不規則的形狀"></a>難題 2、不規則的形狀</h2><p>因為<strong>拍照得來的拼圖的大小和形狀都跟原圖不一樣</strong>，所難度又增加了一點…</p><img src="/posts/%E4%B8%80%E6%AC%A1%E6%88%90%E5%8A%9F%E7%94%A8Open-CV%E6%8B%BC%E5%9C%96%E7%9A%84%E7%B6%93%E9%A9%97/jigsaw_piece.jpeg" title="One Piece Jigsaw Piece"><p class="caption">你爺爺丫！</p><p>我用了 OpenCV 的 Feature Matching 和 Homography 技術解決這個問題，這技術可以<strong>無視大小和 rotation 進行比較</strong>，但就如上面說的，我的原圖跟拼圖的圖像質素都不太好，所以效果就不太理想…</p><img src="/posts/%E4%B8%80%E6%AC%A1%E6%88%90%E5%8A%9F%E7%94%A8Open-CV%E6%8B%BC%E5%9C%96%E7%9A%84%E7%B6%93%E9%A9%97/opencv.jpg" title="Opencv"><p class="caption">官方效果圖，這是騙人的…</p><h2 id="結果還是要用肉眼看"><a href="#結果還是要用肉眼看" class="headerlink" title="結果還是要用肉眼看"></a>結果還是要用肉眼看</h2><p>雖然這個程式是有一點幫助，但是程式<strong>只能顯示大概的位置</strong>…</p><img src="/posts/%E4%B8%80%E6%AC%A1%E6%88%90%E5%8A%9F%E7%94%A8Open-CV%E6%8B%BC%E5%9C%96%E7%9A%84%E7%B6%93%E9%A9%97/Homer.gif" title="Homer Jigsaw"><h2 id="改善方法-—-擴增實境（AR）"><a href="#改善方法-—-擴增實境（AR）" class="headerlink" title="改善方法  —  擴增實境（AR）"></a>改善方法  —  擴增實境（AR）</h2><p>從那時候開始就一直有<strong>加入 AR 的想法</strong>，我只要拍下拼圖，App 就會「叮」一聲然後把正確的位置顯示出來，完美！</p><p>談何容易！經過多番嘗試，發現以現在的技術來說還有一定的難度，<strong>確準性是一大難題</strong>。但最近聽到 Apple 將推出 ARKit 2 的消息，又給了我一絲希望，我拭目以待！</p><h2 id="完成品"><a href="#完成品" class="headerlink" title="完成品"></a>完成品</h2><p>幾經辛苦，我的拼圖在程式的協助下也<strong>花了約一星期</strong>才完成，短時間內我大概不會再碰 1000pic 的拼圖了…</p><img src="/posts/%E4%B8%80%E6%AC%A1%E6%88%90%E5%8A%9F%E7%94%A8Open-CV%E6%8B%BC%E5%9C%96%E7%9A%84%E7%B6%93%E9%A9%97/one_piece.jpeg" title="One Piece Jigsaw"><p>p.s. 這程式只適用顏色有一定對比度的拼圖，好險我不是買純白地獄…</p><div class="splitter"><span>(´～`)</span></div><h2 id="相關文章"><a href="#相關文章" class="headerlink" title="相關文章"></a>相關文章</h2><ul><li><a href="/posts/OpenCV拼圖輔助程式（續）">OpenCV 拼圖輔助程式（續）</a></li><li><a href="/posts/匯出龍族拼圖（Puzzle-Dragons）寵物清單的方法">匯出龍族拼圖（Puzzle-Dragons）寵物清單的方法</a></li></ul><p></p></article></div><button id="btnScrollTop" onclick="scrollToTop()"><i class="icon-up-big"></i></button></div></div><script src="/js/app.js"></script></body></html>